@using BudgetAnalyzer.Shared.Data;
@namespace BudgetAnalyzer.Shared.Controls
@inherits SubscribedComponent

<MudStack Row="true" AlignItems="AlignItems.Baseline">
    <MudText>Selected Budget: </MudText>

    <MudSelect @bind-Value:get=Settings.CurrentBudgetId @bind-Value:set=SetSelectedBudget>
        <MudSelectItem Disabled="true" Value="default(Guid)">None</MudSelectItem>
        @foreach(Budget budget in State.AvailableBudgets)
        {
            <MudSelectItem Value="budget.Id">@budget.Name</MudSelectItem>        
        }
    </MudSelect>
</MudStack>

<MudStack Spacing="0" Class="mt-4">
    <MudButton Variant="Variant.Text" OnClick="() => ShowState = !ShowState">Show Current App Data</MudButton>
    <MudDivider />
    <MudCollapse Expanded="ShowState">
        <pre>
            @State.ToJson()
        </pre>
    </MudCollapse>
</MudStack>


@code {
    private AppSettings Settings => State.Settings;
    private bool ShowState { get; set; } = false;

    private void SetSelectedBudget(Guid selectedBudget) => AddAction(new SetSelectedBudgetAction(selectedBudget));
}
