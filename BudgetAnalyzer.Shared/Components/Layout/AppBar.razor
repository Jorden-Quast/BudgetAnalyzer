@namespace BudgetAnalyzer.Shared.Layout
@inherits SubscribedComponent

<MudAppBar>
    <MudMenu Icon="@Icons.Material.Filled.Menu">
        <MudMenuItem>
            <MudFileUpload T="IBrowserFile" Accept=".json" FilesChanged="FileUpload">
                <ActivatorContent>
                    <MudButton StartIcon="@Icons.Material.Filled.FileUpload">Upload App Data</MudButton>
                </ActivatorContent>
            </MudFileUpload>
        </MudMenuItem>
    </MudMenu>
    <MudSpacer />

    <MudButtonGroup Color="Color.Tertiary" Variant="Variant.Text">
        <MudButton>
            <MudNavLink Href="/" Match="NavLinkMatch.All">Home</MudNavLink>
        </MudButton>
        <MudButton>
            <MudNavLink Href="/settings" Match="NavLinkMatch.Prefix">Settings</MudNavLink>
        </MudButton>
    </MudButtonGroup>
    <MudSpacer />

    <MudIconButton Icon="@Icons.Material.Filled.Code" Href="https://github.com/Jorden-Quast/BudgetAnalyzer" />
</MudAppBar>

@code{
    public async Task FileUpload(IBrowserFile newFile)
    {
        Stream fileStream = newFile.OpenReadStream();
        StreamReader reader = new(fileStream);
        string fileText = await reader.ReadToEndAsync();

        AddAction(new SetAppFromJsonAction(fileText));


    }
}
